<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Master Game</title>
<style>
  body {
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    background: linear-gradient(to right, #74ebd5, #acb6e5);
    min-height: 100vh;
  }
  h1 { margin-bottom: 10px; color: #fff; text-shadow: 1px 1px 2px #000; }
  #grid {
    display: grid;
    gap: 8px;
    margin-top: 20px;
  }
  .card {
    width: 50px;
    height: 50px;
    background: #1e90ff;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.8rem;
    cursor: pointer;
    border-radius: 8px;
    user-select: none;
    transition: transform 0.3s, background 0.3s;
  }
  .card.flipped {
    background: #fff;
    color: #1e90ff;
    transform: rotateY(180deg);
  }
  #message {
    margin-top: 20px;
    font-size: 1.5rem;
    font-weight: bold;
    color: #fff;
    text-shadow: 1px 1px 2px #000;
    text-align: center;
  }
  #controls {
    margin-top: 10px;
  }
  #controls button {
    padding: 8px 16px;
    font-size: 1rem;
    margin-right: 10px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    background: #1e90ff;
    color: white;
    transition: background 0.3s;
  }
  #controls button:hover {
    background: #104e8b;
  }
  #timer {
    margin-top: 10px;
    font-size: 1.2rem;
    color: #fff;
    text-shadow: 1px 1px 2px #000;
  }
</style>
</head>
<body>

<h1>Memory Master</h1>

<div id="controls">
  Grid Size: 
  <button onclick="startGame(3)">3x3</button>
  <button onclick="startGame(4)">4x4</button>
  <button onclick="startGame(5)">5x5</button>
</div>

<div id="timer"></div>
<div id="grid"></div>
<div id="message"></div>
<button id="restartBtn" style="display:none;">Restart</button>

<script>
let firstCard = null;
let secondCard = null;
let lockBoard = false;
let matches = 0;
let totalPairs = 0;
let wrongAttempts = 0;
const maxWrongAttempts = 15;
let currentSize = 3; // default grid size
let timeLimit = 60; // seconds
let timerInterval = null;

// Emojis
const emojis = ['ğŸ','ğŸŒ','ğŸ‡','ğŸ‰','ğŸ’','ğŸ','ğŸ¥','ğŸ‘','ğŸ“','ğŸ¥¥','ğŸ¥­','ğŸ‹','ğŸ','ğŸŠ','ğŸ¥‘','ğŸŒ½','ğŸ¥•','ğŸ†','ğŸ¥”','ğŸŒ¶ï¸','ğŸ¥¦','ğŸ¥¬','ğŸ„','ğŸ«‘','ğŸ¥œ'];

function startGame(size) {
  currentSize = size;
  const grid = document.getElementById('grid');
  grid.innerHTML = '';
  firstCard = null;
  secondCard = null;
  lockBoard = false;
  matches = 0;
  wrongAttempts = 0;
  document.getElementById('message').textContent = '';
  document.getElementById('restartBtn').style.display = 'none';
  
  // Stop any previous timer
  clearInterval(timerInterval);
  startTimer(timeLimit);

  const totalCards = size * size;
  totalPairs = Math.floor(totalCards / 2);

  // Select emojis
  let selectedEmojis = emojis.slice(0, totalPairs);
  let cardEmojis = [...selectedEmojis, ...selectedEmojis];
  if (cardEmojis.length < totalCards) cardEmojis.push('â“');
  cardEmojis = cardEmojis.sort(() => Math.random() - 0.5);

  grid.style.gridTemplateColumns = `repeat(${size}, 50px)`;

  cardEmojis.forEach(emoji => {
    const card = document.createElement('div');
    card.classList.add('card');
    card.dataset.value = emoji;
    card.textContent = '';
    card.addEventListener('click', flipCard);
    grid.appendChild(card);
  });
}

function flipCard() {
  if (lockBoard) return;
  if (this === firstCard) return;

  this.classList.add('flipped');
  this.textContent = this.dataset.value;

  if (!firstCard) {
    firstCard = this;
    return;
  }

  secondCard = this;
  checkMatch();
}

function checkMatch() {
  if (firstCard.dataset.value === secondCard.dataset.value) {
    matches++;
    resetTurn();
    if (matches === totalPairs) {
      endGame(true);
    }
  } else {
    wrongAttempts++;
    lockBoard = true;
    setTimeout(() => {
      firstCard.classList.remove('flipped');
      secondCard.classList.remove('flipped');
      firstCard.textContent = '';
      secondCard.textContent = '';
      resetTurn();
      if (wrongAttempts >= maxWrongAttempts) {
        endGame(false);
      }
    }, 800);
  }
}

function resetTurn() {
  [firstCard, secondCard] = [null, null];
  lockBoard = false;
}

function endGame(win) {
  clearInterval(timerInterval);
  document.getElementById('message').textContent = win ? 'ğŸ‰ You Win!' : 'ğŸ’¥ Time\'s up! You Lose!';
  document.getElementById('restartBtn').style.display = 'inline-block';
  lockBoard = true;
}

// Timer
function startTimer(seconds) {
  let timeLeft = seconds;
  const timerDisplay = document.getElementById('timer');
  timerDisplay.textContent = `â° Time: ${timeLeft}s`;

  timerInterval = setInterval(() => {
    timeLeft--;
    timerDisplay.textContent = `â° Time: ${timeLeft}s`;
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      endGame(false);
    }
  }, 1000);
}

// Restart button
document.getElementById('restartBtn').addEventListener('click', () => {
  startGame(currentSize);
});

// Start default game
startGame(currentSize);
</script>

</body>
  </html>
