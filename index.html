<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Master Game</title>
<style>
  body {
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    background: linear-gradient(to right, #74ebd5, #acb6e5);
    min-height: 100vh;
  }
  h1 { margin-bottom: 10px; color: #fff; text-shadow: 1px 1px 2px #000; }
  #grid {
    display: grid;
    gap: 10px;
    margin-top: 20px;
  }
  .card {
    width: 80px;
    height: 80px;
    background: #1e90ff;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2rem;
    cursor: pointer;
    border-radius: 10px;
    user-select: none;
    transition: transform 0.3s, background 0.3s;
  }
  .card.flipped {
    background: #fff;
    color: #1e90ff;
    transform: rotateY(180deg);
  }
  #message {
    margin-top: 20px;
    font-size: 1.5rem;
    font-weight: bold;
    color: #fff;
    text-shadow: 1px 1px 2px #000;
  }
  #controls {
    margin-top: 10px;
  }
  #controls button {
    padding: 10px 20px;
    font-size: 1rem;
    margin-right: 10px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    background: #1e90ff;
    color: white;
    transition: background 0.3s;
  }
  #controls button:hover {
    background: #104e8b;
  }
</style>
</head>
<body>

<h1>Memory Master</h1>

<div id="controls">
  Grid Size: 
  <button onclick="startGame(3)">3x3</button>
  <button onclick="startGame(4)">4x4</button>
  <button onclick="startGame(5)">5x5</button>
</div>

<div id="grid"></div>
<div id="message"></div>

<script>
let firstCard = null;
let secondCard = null;
let lockBoard = false;
let matches = 0;
let totalPairs = 0;
let wrongAttempts = 0;
const maxWrongAttempts = 15;

function startGame(size) {
  const grid = document.getElementById('grid');
  grid.innerHTML = '';
  firstCard = null;
  secondCard = null;
  lockBoard = false;
  matches = 0;
  wrongAttempts = 0;
  document.getElementById('message').textContent = '';

  const totalCards = size * size;
  totalPairs = Math.floor(totalCards / 2);

  let numbers = [];
  for (let i = 1; i <= totalPairs; i++) {
    numbers.push(i);
    numbers.push(i);
  }
  if (numbers.length < totalCards) numbers.push(0);

  numbers = numbers.sort(() => Math.random() - 0.5);

  grid.style.gridTemplateColumns = `repeat(${size}, 80px)`;

  numbers.forEach(num => {
    const card = document.createElement('div');
    card.classList.add('card');
    card.dataset.value = num;
    card.textContent = '';
    card.addEventListener('click', flipCard);
    grid.appendChild(card);
  });
}

function flipCard() {
  if (lockBoard) return;
  if (this === firstCard) return;

  this.classList.add('flipped');
  this.textContent = this.dataset.value == 0 ? '' : this.dataset.value;

  if (!firstCard) {
    firstCard = this;
    return;
  }

  secondCard = this;
  checkMatch();
}

function checkMatch() {
  if (firstCard.dataset.value === secondCard.dataset.value) {
    matches++;
    resetTurn();
    if (matches === totalPairs) {
      document.getElementById('message').textContent = 'ðŸŽ‰ You Win!';
    }
  } else {
    wrongAttempts++;
    lockBoard = true;
    setTimeout(() => {
      firstCard.classList.remove('flipped');
      secondCard.classList.remove('flipped');
      firstCard.textContent = '';
      secondCard.textContent = '';
      resetTurn();
      if (wrongAttempts >= maxWrongAttempts) {
        document.getElementById('message').textContent = 'ðŸ’¥ You Lose! Try Again.';
        lockBoard = true;
      }
    }, 1000);
  }
}

function resetTurn() {
  [firstCard, secondCard] = [null, null];
  lockBoard = false;
}

// Start default game
startGame(3);
</script>

</body>
  </html>
